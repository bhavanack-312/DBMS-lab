CREATE DATABASE Insurance;
USE Insurance;

CREATE TABLE PERSON 
(
DRIVER_ID VARCHAR(15),
NAME VARCHAR(30) NOT NULL,
ADDRESS VARCHAR(30),
PRIMARY KEY(DRIVER_ID)
);

CREATE TABLE CAR(
REG_NUM VARCHAR(15),
MODEL VARCHAR(15),
YEAR INT,
PRIMARY KEY (REG_NUM)
);

CREATE TABLE ACCIDENT(
REPORT_NUM INT,
ACCIDENT_DATE DATE,
LOCATION VARCHAR(30),
PRIMARY KEY (REPORT_NUM)
);

CREATE TABLE OWNS(
DRIVER_ID VARCHAR(15),
REG_NUM VARCHAR(15),
FOREIGN KEY (DRIVER_ID) REFERENCES PERSON(DRIVER_ID),
FOREIGN KEY (REG_NUM) REFERENCES CAR(REG_NUM)
);

CREATE TABLE PARTICIPATED(
DRIVER_ID VARCHAR(15),
REG_NUM VARCHAR(15),
REPORT_NUM INT,
DAMAGE_AMOUNT INT,
FOREIGN KEY (DRIVER_ID) REFERENCES PERSON(DRIVER_ID),
FOREIGN KEY (REG_NUM) REFERENCES CAR(REG_NUM),
FOREIGN KEY (REPORT_NUM) REFERENCES ACCIDENT(REPORT_NUM)
);

INSERT INTO PERSON VALUES("A01","Richard","Srinivas Nagar"),("A02","Pradeep","Rajaji Nagar"),
("A03","Smith","Ashok Nagar"),("A04","Venu","N R Colony"),("A05","Jhon","Hanumanth Nagar");
SELECT * FROM PERSON;

INSERT INTO CAR VALUES("KA052250","Indica",1990),("KA031181","Lancer",1957),("KA095477","Toyota",1998),
("KA053408","Honda",2008),("KA041702","Audi",2005);
SELECT * FROM CAR;

INSERT INTO OWNS VALUES("A01","KA052250"),("A02","KA053408"),("A03","KA031181"),("A04","KA095477"),("A05","KA041702");
SELECT * FROM OWNS;

INSERT INTO ACCIDENT VALUES(11,'2003-01-01',"Mysore Road"),(12,'2004-02-02',"South end Circle"),(13,'2003-01-21',"Bull Temple Road"),
(14,'2008-02-17',"Mysore Road"),(15,'2005-03-04',"Kanakpura Road");
SELECT * FROM ACCIDENT;

INSERT INTO PARTICIPATED VALUES ("A01","KA052250",11,10000),("A02","KA053408",12,50000),("A03","KA031181",13,25000),("A04","KA095477",14,3000),
("A05","KA041702",15,5000);
SELECT * FROM PARTICIPATED;

UPDATE PARTICIPATED
SET DAMAGE_AMOUNT=25000
WHERE REG_NUM="KA053408";

INSERT INTO ACCIDENT
VALUES (16,"2009-05-12","Belagavi");
SELECT * FROM ACCIDENT;

SELECT COUNT(ACCIDENT_DATE) AS ACCIDENTS2008 FROM ACCIDENT
WHERE YEAR(ACCIDENT_DATE)=2008;

SELECT COUNT(MODEL) AS INDICA FROM car
WHERE MODEL="Indica";
